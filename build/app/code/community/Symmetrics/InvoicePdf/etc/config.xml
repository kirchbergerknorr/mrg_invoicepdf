<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * @category  Symmetrics
 * @package   Symmetrics_InvoicePdf
 * @author    Symmetrics GmbH <info@symmetrics.de>
 * @author    Eugen Gitin <eg@symmetrics.de>
 * @author    Eric Reiche <er@symmetrics.de>
 * @copyright 2009 Symmetrics GmbH
 * @license   http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 * @link      http://www.symmetrics.de/
 */
-->
<config>
    <modules>
        <Symmetrics_InvoicePdf>
            <version>0.3.0</version>
        </Symmetrics_InvoicePdf>
    </modules>
    <adminhtml>
        <translate>
            <modules>
                <Symmetrics_InvoicePdf>
                    <files>
                        <default>Symmetrics_InvoicePdf.csv</default>
                    </files>
                </Symmetrics_InvoicePdf>
            </modules>
        </translate>
    </adminhtml>
    <global>
        <events>
            <sales_order_place_after>
                <observers>
                    <symmetrics_invoicepdf_model_observer>
                        <type>singleton</type>
                        <class>Symmetrics_InvoicePdf_Model_Observer</class>
                        <method>createInvoice</method>
                    </symmetrics_invoicepdf_model_observer>
                </observers>
            </sales_order_place_after>
        </events>
        <invoicepdf>
            <invoice>
                <default>invoicepdf/pdf_items_invoice_default</default>
                <bundle>invoicepdf/pdf_items_bundle_invoice</bundle>
                <!-- <grouped>sales/order_pdf_items_invoice_grouped</grouped> -->
            </invoice>
            <totals>
                <subtotal translate="title">
                    <title>Subtotal</title>
                    <source_field>subtotal</source_field>
                    <font_size>8</font_size>
                    <display_zero>1</display_zero>
                    <sort_order>100</sort_order>
                </subtotal>
                <discount translate="title">
                    <title>Discount</title>
                    <source_field>discount_amount</source_field>
                    <amount_prefix>-</amount_prefix>
                    <font_size>7</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>200</sort_order>
                </discount>
                <shipping translate="title">
                    <title>Shipping &amp; Handling</title>
                    <source_field>shipping_amount</source_field>
                    <font_size>8</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>400</sort_order>
                </shipping>
                <adjustment_positive translate="title">
                    <title>Adjustment Refund</title>
                    <source_field>adjustment_positive</source_field>
                    <font_size>8</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>500</sort_order>
                </adjustment_positive>
                <adjustment_negative translate="title">
                    <title>Adjustment Fee</title>
                    <source_field>adjustment_negative</source_field>
                    <font_size>8</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>600</sort_order>
                </adjustment_negative>
                <grand_total translate="title">
                    <title>Grand Total</title>
                    <source_field>grand_total</source_field>
                    <font_size>12</font_size>
                    <display_zero>1</display_zero>
                    <sort_order>700</sort_order>
                </grand_total>
                <tax translate="title">
                    <title>Tax</title>
                    <source_field>tax_amount</source_field>
                    <model>tax/sales_pdf_tax</model>
                    <font_size>8</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>300</sort_order>
                </tax>
            </totals>
        </invoicepdf>
        <models>
            <!--
            <bundle>
                <rewrite>
                    <sales_order_pdf_items_invoice>Symmetrics_InvoicePdf_Model_Pdf_Items_Bundle_Invoice</sales_order_pdf_items_invoice>
                </rewrite>
            </bundle>
            <sales>
                <rewrite>
                    <order_pdf_invoice>Symmetrics_InvoicePdf_Model_Pdf_Invoice</order_pdf_invoice>
                    <order_pdf_items_invoice_default>Symmetrics_InvoicePdf_Model_Pdf_Items_Default</order_pdf_items_invoice_default>
                    <order_pdf_items_invoice_grouped>Symmetrics_InvoicePdf_Model_Pdf_Items_Grouped</order_pdf_items_invoice_grouped>
                    <order_pdf_creditmemo>Symmetrics_InvoicePdf_Model_Pdf_Creditmemo</order_pdf_creditmemo>
                    <order_pdf_items_creditmemo_default>Symmetrics_InvoicePdf_Model_Pdf_Items_Default</order_pdf_items_creditmemo_default>
                </rewrite>
            </sales>
            <tax>
                <rewrite>
                    <sales_pdf_grandtotal>Symmetrics_InvoicePdf_Model_Tax_Pdf_Grandtotal</sales_pdf_grandtotal>
                </rewrite>
            </tax> 
            -->
            <invoicepdf>
                <class>Symmetrics_InvoicePdf_Model</class>
            </invoicepdf>
        </models>
        <customer>
            <address>
                <formats>
                    <pdf translate="title" module="customer">
                        <title>PDF</title>
                        <defaultFormat><![CDATA[
{{depend company}}{{var company}}|{{/depend}}
{{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}|
{{var street1}}|
{{depend street2}}{{var street2}}|{{/depend}}
{{depend street3}}{{var street3}}|{{/depend}}
{{depend street4}}{{var street4}}|{{/depend}}
{{var postcode}} {{depend city}}{{var city}}{{/depend}}|
{{var country}}|
                        ]]></defaultFormat>
                    </pdf>
                </formats>
            </address>
        </customer>
        <helpers>
            <invoicepdf>
                <class>Symmetrics_InvoicePdf_Helper</class>
            </invoicepdf>
        </helpers>
        <resources>
            <invoicepdf_setup>
                <setup>
                    <module>Symmetrics_InvoicePdf</module>
                    <class>Mage_Eav_Model_Entity_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </invoicepdf_setup>
            <invoicepdf_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </invoicepdf_write>
            <invoicepdf_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </invoicepdf_read>
        </resources>
    </global>
    <admin>
        <routers>
            <invoicepdf>
                <use>admin</use>
                <args>
                    <module>Symmetrics_InvoicePdf</module>
                    <frontName>symmetrics</frontName>
                </args>
            </invoicepdf>
        </routers>
    </admin>
    <default>
        <sales_pdf>
            <invoice>
                <showfooter>1</showfooter>
            </invoice>
        </sales_pdf>
        <sales>
            <identity>
                <logoposition>left</logoposition>
            </identity>
        </sales>
    </default>
</config>